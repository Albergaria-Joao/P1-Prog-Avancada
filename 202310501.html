<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            body
            {
                font-family: 'Courier New', Courier, monospace;
                justify-content: center;
                color: grey;
            }
            .txt-verde
            {   
                font-family: Arial, Helvetica, sans-serif;
                font-weight: bold;
                font-style: normal;
                color: green;
            }
            .txt-vermelho
            {
                font-family: Arial, Helvetica, sans-serif;
                font-weight: bold;
                font-style: normal;
                color: red;
            }
            h1 
            {
                font-family: Arial, Helvetica, sans-serif;
                color: blue;
            }
            select
            {
                font-family: 'Courier New', Courier, monospace;
                color: grey;
            }
        </style>

        <script>

            function validarSenha(senha) {
                const checkMaiuscula = /[A-Z]/.test(senha);
                const checkEspecial = /[^a-zA-Z0-9]/.test(senha); 
                
                return checkMaiuscula && checkEspecial;
            }

            function validarCPF(cpf) {
                // Remove pontos e hífen
                cpf = cpf.replace(/[^\d]+/g, '');

                // Verifica se tem 11 dígitos ou se todos os dígitos são iguais
                if (cpf.length !== 11 || /^(\d)\1+$/.test(cpf)) {
                    return false;
                }

                // Validação do primeiro dígito verificador
                let soma = 0;
                for (let i = 0; i < 9; i++) {
                    soma += parseInt(cpf.charAt(i)) * (10 - i);
                }
                let resto = (soma * 10) % 11;
                if (resto === 10 || resto === 11) resto = 0;
                if (resto !== parseInt(cpf.charAt(9))) {
                    return false;
                }

                // Validação do segundo dígito verificador
                soma = 0;
                for (let i = 0; i < 10; i++) {
                    soma += parseInt(cpf.charAt(i)) * (11 - i);
                }
                resto = (soma * 10) % 11;
                if (resto === 10 || resto === 11) resto = 0;
                if (resto !== parseInt(cpf.charAt(10))) {
                    return false;
                }

                return true;
            }


            document.addEventListener("DOMContentLoaded", function() { 
            // Uso isso para esperar o DOM carregar; senão, quando o script carrega, o form ainda não existe
                
                var form_cadastro = document.getElementById('form_cadastro');

                form_cadastro.addEventListener('submit', function(event) {
                    event.preventDefault();

                    let nome = document.getElementById("nome").value;
                    let cpf = document.getElementById("cpf").value;
                    let email = document.getElementById("email").value;
                    let senha = document.getElementById("senha").value;
                    let fone = document.getElementById("fone").value;
                    let nasc = document.getElementById("nasc").value;
                    let insc = document.getElementById("insc").value;
                    
                    campos_txt = [nome, cpf, email, senha, fone, nasc, insc];
                     
                    let falha = false;

                    let instrumento = document.getElementById("instrumento").value;
                    let profissional = document.querySelector('input[name="prof"]:checked');
                    let estilos = document.querySelectorAll('input[name="estilos"]:checked');

                    if (instrumento === "" || !profissional || estilos.length === 0) {
                        alert("Todos os campos devem ser preenchidos."); // O trim considera também espaços em branco
                        return;
                    }
                    for (let i = 0; i < campos_txt.length; i++) {
                        if (campos_txt[i] === null || campos_txt[i] === undefined || campos_txt[i].trim() === '') {
                            alert("Todos os campos_txt devem ser preenchidos."); // O trim considera também espaços em branco
                            return;
                        }  
                    }



                    if (nome.split(" ").length <= 1 || !/^[^\d]*$/.test(nome)) {
                        alert("Preencha seu nome completo (mais de uma palavra), com apenas letras");
                        falha = true;
                    }

                    if (!/^\(?\d{2,3}\)?[\s-]?\d{4,5}[-\s]?\d{4}$/.test(fone)) { // Uso de regex para verificar o formato do telefone
                        alert("O formato do telefone é inválido.");
                        falha = true;
                    }

                    if (!/^\d{3}\.\d{3}\.\d{3}-\d{2}$/.test(cpf) || !validarCPF(cpf)) { // Uso de regex para verificar o formato do telefone
                        alert("CPF inválido!");
                        falha = true;
                    }

                    if (!/^[a-zA-Z._%+-]+@[a-zA-Z.-]+\.[a-zA-Z]{2,}$/.test(email)) {
                        alert("Preencha um endereço de e-mail válido.");
                        falha = true;
                    }
                    
                    if (senha.length <= 12 || !validarSenha(senha)) {
                        alert("Sua senha deve ter pelo menos 12 caracteres, sendo pelo menos 1 maiúsculo e 1 especial");
                        falha = true;
                    }

                    if (nasc >= '1980-01-01' && nasc <= '2005-12-31') {
                        alert("Data de nascimento inválida!");
                        falha = true;
                    }

                    if (nasc <= '1980-01-01' || nasc >= '2005-12-31') {
                        alert("Data de nascimento inválida!");
                        falha = true;
                    }

                    const dataAtual = new Date();
                    if (insc <= '2025-01-01' || insc >= dataAtual) {
                        alert("Data de inscrição inválida!");
                        falha = true;
                    }

                    if (falha == false) {
                        alert("SUCESSO!");
                    }
                });
            });

        </script>



    </head>
    <body>
        <h1>Formulário</h1>
        <form id="form_cadastro">
            <label for="nome" class="txt-verde">Nome completo:</label>
            <input type="text" id="nome" name="nome"><br>

            <label for="cpf" class="txt-verde">CPF:</label>
            <input type="text" id="cpf" name="cpf"><br>

            <label for="email" class="txt-verde">E-mail:</label>
            <input type="text" id="email" name="email"><br>

            <label for="senha" class="txt-verde">Senha:</label>
            <input type="password" id="senha" name="senha"><br>

            <label for="fone" class="txt-verde">Telefone para contato:</label>
            <input type="text" id="fone" name="fone"><br>

            <label for="nasc" class="txt-verde">Data de inscrição:</label>
            <input type="date" id="nasc" name="nasc"><br>

            <label for="insc" class="txt-verde">Data de inscrição:</label>
            <input type="date" id="insc" name="insc"><br>

            <p class="txt-vermelho">Instrumento musical: </p>
            <select id="instrumento" name="instrumento">
                <option value="guitarra">Guitarra</option>
            </select>


            <p class="txt-vermelho">Profissional?</p>
            <input type="radio" id="sim" name="prof" value="Sim">
            <label for="sim">Sim</label>
            <input type="radio" id="nao" name="prof" value="Não">
            <label for="nao">Sim</label>
            <br>

            <p class="txt-vermelho">Estilos:</p>
            <input type="checkbox" id="rock" name="estilos" value="Rock & Roll">
            <label for="rock">Rock & Roll</label><br>
            <input type="checkbox" id="pop" name="estilos" value="pop">
            <label for="pop">Pop</label><br>
            <input type="checkbox" id="bossa" name="estilos" value="Bossa Nova">
            <label for="bossa">Bossa Nova</label><br>
            <input type="checkbox" id="samba" name="estilos" value="Samba">
            <label for="samba">Samba</label><br>

            <input type="submit" value="Enviar">
            <input type="reset" value="Limpar">
    </body>
</html>